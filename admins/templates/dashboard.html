{% extends 'base.html' %}
{% block extra_css %}
{% load static %}

<link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
{% endblock %}

 {% block content %}


<!-- Main Content -->
<div class="">
  <!-- Top Navbar -->
  <div class="top-navbar">
    <button class="burger-menu">
      <i class="fas fa-bars"></i>
    </button>
    <div class="user-profile">
      <img src="" alt="Admin" />
      <div>
        <h6 class="mb-0">{{ user.username }}</h6>
        <small class="text-muted">Quản trị viên</small>
      </div>
    </div>
  </div>

  <!-- Welcome Section -->
  <div class="welcome-section">
    <div class="row align-items-center">
      <div class="col-md-6">
        <h2>Chào mừng, {{ user.username }}!</h2>
        <p>
          Đây là tổng quan về hệ thống. Hãy kiểm tra các số liệu thống kê mới
          nhất.
        </p>
      </div>
      <div class="col-md-6 text-md-end">
        <small class="text-muted"
          >Cập nhật lần cuối: <span id="lastUpdateTime"></span
        ></small>
      </div>
    </div>
  </div>

  <!-- Dashboard Cards -->
  <div class="row mb-4">
    <div class="col-md-3 col-sm-6 mb-3">
      <div class="card dashboard-card">
        <div class="card-header bg-primary-gradient text-white">
          Tổng số bài kiểm tra
        </div>
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <h3 class="card-title">{{ total_exams }}</h3>
            <i class="fas fa-file-alt card-icon"></i>
          </div>
          <div class="mt-3">
            <span class="text-success">
              <i class="fas fa-arrow-up"></i> 12%
            </span>
            <span class="text-muted ms-2">so với tháng trước</span>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-3 col-sm-6 mb-3">
      <div class="card dashboard-card">
        <div class="card-header bg-success-gradient text-white">
          Tổng số thí sinh
        </div>
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <h3 class="card-title">{{ total_users }}</h3>
            <i class="fas fa-users card-icon"></i>
          </div>
          <div class="mt-3">
            <span class="text-success">
              <i class="fas fa-arrow-up"></i> 8%
            </span>
            <span class="text-muted ms-2">so với tháng trước</span>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-3 col-sm-6 mb-3">
      <div class="card dashboard-card">
        <div class="card-header bg-warning-gradient text-white">
          Chứng chỉ đã cấp
        </div>
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <h3 class="card-title">{{ total_certificates }}</h3>
            <i class="fas fa-certificate card-icon"></i>
          </div>
          <div class="mt-3">
            <span class="text-success">
              <i class="fas fa-arrow-up"></i> 15%
            </span>
            <span class="text-muted ms-2">so với tháng trước</span>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-3 col-sm-6 mb-3">
      <div class="card dashboard-card">
        <div class="card-header bg-danger-gradient text-white">Tỷ lệ đậu</div>
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center">
            <h3 class="card-title">76%</h3>
            <i class="fas fa-chart-pie card-icon"></i>
          </div>
          <div class="mt-3">
            <span class="text-danger">
              <i class="fas fa-arrow-down"></i> 3%
            </span>
            <span class="text-muted ms-2">so với tháng trước</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Management Section -->
  <div class="card mb-4">
    <div class="card-header bg-white">
      <h5 class="mb-0">Quản lý hệ thống</h5>
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-md-6">
          <a href="#" class="management-item">
            <i class="fas fa-question-circle bg-primary"></i>
            <div>
              <h5 class="mb-1">Ngân hàng câu hỏi</h5>
              <p class="mb-0 text-muted">
                Quản lý tất cả các câu hỏi trong hệ thống
              </p>
            </div>
          </a>
        </div>
        <div class="col-md-6">
          <a href="#" class="management-item">
            <i class="fas fa-file-alt bg-success"></i>
            <div>
              <h5 class="mb-1">Bài kiểm tra</h5>
              <p class="mb-0 text-muted">Tạo và quản lý các bài kiểm tra</p>
            </div>
          </a>
        </div>
        <div class="col-md-6">
          <a href="#" class="management-item">
            <i class="fas fa-users bg-warning"></i>
            <div>
              <h5 class="mb-1">Thí sinh</h5>
              <p class="mb-0 text-muted">
                Quản lý thông tin và kết quả của thí sinh
              </p>
            </div>
          </a>
        </div>
        <div class="col-md-6">
          <a href="#" class="management-item">
            <i class="fas fa-certificate bg-danger"></i>
            <div>
              <h5 class="mb-1">Chứng chỉ</h5>
              <p class="mb-0 text-muted">Quản lý và cấp chứng chỉ</p>
            </div>
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Recent Activity -->
  <div class="card">
    <div
      class="card-header bg-white d-flex justify-content-between align-items-center"
    >
      <h5 class="mb-0">Hoạt động gần đây</h5>
      <a href="#" class="btn btn-sm btn-outline-primary">Xem tất cả</a>
    </div>
    <div class="card-body p-0">
      <div class="list-group list-group-flush">
        <div
          class="list-group-item d-flex justify-content-between align-items-center p-3"
        >
          <div class="d-flex align-items-center">
            <i class="fas fa-user-plus text-primary me-3"></i>
            <div>
              <h6 class="mb-0">Thí sinh mới đăng ký</h6>
              <small class="text-muted"
                >Nguyễn Văn A đã đăng ký tài khoản</small
              >
            </div>
          </div>
          <small class="text-muted">2 giờ trước</small>
        </div>
        <div
          class="list-group-item d-flex justify-content-between align-items-center p-3"
        >
          <div class="d-flex align-items-center">
            <i class="fas fa-certificate text-success me-3"></i>
            <div>
              <h6 class="mb-0">Cấp chứng chỉ mới</h6>
              <small class="text-muted">Đã cấp 5 chứng chỉ mới</small>
            </div>
          </div>
          <small class="text-muted">4 giờ trước</small>
        </div>
        <div
          class="list-group-item d-flex justify-content-between align-items-center p-3"
        >
          <div class="d-flex align-items-center">
            <i class="fas fa-edit text-warning me-3"></i>
            <div>
              <h6 class="mb-0">Chỉnh sửa bài kiểm tra</h6>
              <small class="text-muted"
                >Bài kiểm tra "Tiếng Anh cơ bản" đã được cập nhật</small
              >
            </div>
          </div>
          <small class="text-muted">Hôm qua</small>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // Format current date and time
  const now = new Date();
  const options = {
    weekday: "long",
    year: "numeric",
    month: "long",
    day: "numeric",
    hour: "2-digit",
    minute: "2-digit",
  };
  document.getElementById("lastUpdateTime").textContent =
    now.toLocaleDateString("vi-VN", options);

  // Toggle sidebar
  const burgerMenu = document.querySelector(".burger-menu");
  const sidebar = document.querySelector(".sidebar");

  burgerMenu.addEventListener("click", () => {
    sidebar.classList.toggle("expanded");
  });
</script>
{% endblock %}
